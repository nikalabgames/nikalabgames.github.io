/*! For license information please see instant-games-bridge.js.LICENSE.txt */
(()=>{var e={11:(e,t,r)=>{"use strict";r.d(t,{Z:()=>In});var n={VK:"vk",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",MOCK:"mock",VKPLAY:"vk_play"},o={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARD:"leaderboard",PAYMENTS:"payments"},i={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed"},a={VISIBLE:"visible",HIDDEN:"hidden"},u={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},s={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},c={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},l={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},f={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},p={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement"},y={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",SET_LEADERBOARD_SCORE:"set_leaderboard_score",GET_LEADERBOARD_SCORE:"get_leaderboard_score",GET_LEADERBOARD_ENTRIES:"get_leaderboard_entries",SHOW_LEADERBOARD_NATIVE_POPUP:"show_leaderboard_native_popup",PURCHASE:"purchase",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",CONSUME:"consume"},d={message:"Before using the SDK you must initialize it"},h={message:"Storage not supported"},m={message:"GameDistribution Game ID is undefined"};function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}function _(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function g(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,w(e,t,"set"),r),r}function S(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,w(e,t,"get"))}function w(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var E=new WeakMap,P=new WeakMap,A=new WeakMap;const O=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,E,{writable:!0,value:void 0}),_(this,P,{writable:!0,value:void 0}),_(this,A,{writable:!0,value:void 0}),g(this,E,new Promise((function(e,r){g(t,P,e),g(t,A,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return S(this,E)}},{key:"resolve",value:function(e){S(this,P).call(this,e)}},{key:"reject",value:function(e){S(this,A).call(this,e)}}])&&b(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var k=r(258),T=r.n(k);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function j(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){var t=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===D(t)?t:String(t)}function N(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var B=new WeakMap,C=function(){function e(t){var r,n,o,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"_isInitialized",!1),j(this,"_platformSdk",null),j(this,"_isPlayerAuthorized",!1),j(this,"_playerId",null),j(this,"_playerName",null),j(this,"_playerPhotos",[]),j(this,"_visibilityState",null),j(this,"_localStorage",null),j(this,"_defaultStorageType",l.LOCAL_STORAGE),j(this,"_platformStorageCachedData",null),j(this,"_isBannerSupported",!1),j(this,"_interstitialState",null),j(this,"_rewardedState",null),j(this,"_bannerState",null),o={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=B),n.set(r,o);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState="visible"===document.visibilityState?a.VISIBLE:a.HIDDEN,document.addEventListener("visibilitychange",(function(){u._visibilityState="visible"===document.visibilityState?a.VISIBLE:a.HIDDEN,u.emit(i.VISIBILITY_STATE_CHANGED,u._visibilityState)})),t&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t))}var t,r;return t=e,(r=[{key:"platformId",get:function(){return n.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"bannerState",get:function(){return this._bannerState}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return f.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return f.TABLET}return f.DESKTOP}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!1}},{key:"isLeaderboardSetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(e){return Promise.resolve()}},{key:"authorizePlayer",value:function(e){return Promise.reject()}},{key:"isStorageSupported",value:function(e){return e===l.LOCAL_STORAGE&&null!==this._localStorage}},{key:"isStorageAvailable",value:function(e){return e===l.LOCAL_STORAGE&&null!==this._localStorage}},{key:"getDataFromStorage",value:function(e,t){if(t===l.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this._getDataFromLocalStorage(e[n]));return Promise.resolve(r)}var o=this._getDataFromLocalStorage(e);return Promise.resolve(o)}return Promise.reject(h)}return Promise.reject(h)}},{key:"setDataToStorage",value:function(e,t,r){if(r===l.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(h)}return Promise.reject(h)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===l.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(h)}return Promise.reject(h)}},{key:"showBanner",value:function(e){this._setBannerState(c.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(c.HIDDEN)}},{key:"showInterstitial",value:function(){this._setInterstitialState(u.FAILED)}},{key:"showRewarded",value:function(){this._setRewardedState(s.FAILED)}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(e){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"setLeaderboardScore",value:function(e){return Promise.reject()}},{key:"getLeaderboardScore",value:function(e){return Promise.reject()}},{key:"getLeaderboardEntries",value:function(e){return Promise.reject()}},{key:"showLeaderboardNativePopup",value:function(e){return Promise.reject()}},{key:"paymentsPurchase",value:function(e){return Promise.reject()}},{key:"paymentsConsume",value:function(e){return Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e){var t=this._localStorage.getItem(e);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return t}},{key:"_setDataToLocalStorage",value:function(e,t){"object"===D(t)&&(t=JSON.stringify(t)),this._localStorage.setItem(e,t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setInterstitialState",value:function(e){this._interstitialState===e&&e!==u.FAILED||(this._interstitialState=e,this.emit(i.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:"_setRewardedState",value:function(e){this._rewardedState===e&&e!==s.FAILED||(this._rewardedState=e,this.emit(i.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:"_setBannerState",value:function(e){this._bannerState===e&&e!==c.FAILED||(this._bannerState=e,this.emit(i.BANNER_STATE_CHANGED,this._bannerState))}},{key:"_createPromiseDecorator",value:function(e){var t=new O;return N(this,B)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return N(this,B)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){N(this,B)[e]&&(N(this,B)[e].resolve(t),delete N(this,B)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){N(this,B)[e]&&(N(this,B)[e].reject(t),delete N(this,B)[e])}}])&&R(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();T().mixin(C.prototype);const M=C;var G=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))},F=function(){var e=arguments;return arguments.length<=0?Promise.resolve():new Promise((function(t){var r=setInterval((function(){for(var n=window,o=0;o<e.length;o++){var i=n[e[o]];if(!i)return;n=i}t(),clearInterval(r)}),100)}))},W=function(e){return new Promise((function(t){var r="window.yandexMetricaCounterId = [[[METRIKA_ID]]];";r=r.replaceAll("[[[METRIKA_ID]]]",e);var n=document.createElement("script");n.type="text/javascript",n.text=r,document.head.appendChild(n);var o='(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym([[[METRIKA_ID]]], "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});';o=o.replace("[[[METRIKA_ID]]]",e);var i=document.createElement("script");i.type="text/javascript",i.text=o,i.addEventListener("load",t),document.head.appendChild(i);var a='<div><img src="https://mc.yandex.ru/watch/[[[METRIKA_ID]]]" style="position:absolute; left:-9999px;" alt="" /></div>';a=a.replace("[[[METRIKA_ID]]]",e);var u=document.createElement("noscript");u.innerHTML=a,document.head.appendChild(u)}))};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===z(o)?o:String(o)),n)}var o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},x.apply(this,arguments)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function K(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Z(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function q(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,J(e,t,"get"))}function J(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var X=new WeakMap,Q=new WeakSet;function $(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(p,e);var t,r,o,i,a=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(o);if(i){var r=V(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}(this,e)});function p(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return K(t=Y(e=a.call.apply(a,[this].concat(o))),r=Q),r.add(t),function(e,t,r){K(e,t),t.set(e,{writable:!0,value:void 0})}(Y(e),X),e}return t=p,(r=[{key:"platformId",get:function(){return n.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language");try{t=parseInt(t)}catch(e){}switch(t){case 0:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return x(V(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):x(V(p.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){if(q(this,X))switch(q(this,X)){case"html5_ios":case"html5_android":case"html5_mobile":return f.MOBILE;case"web":return f.DESKTOP}return x(V(p.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===q(this,X)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardNativePopupSupported",get:function(){return this.deviceType===f.MOBILE}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(y.INITIALIZE);if(!o){o=this._createPromiseDecorator(y.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=X,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,J(t,r,"set"),n)),G("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){F("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._isBannerSupported=!0,e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName=t.first_name+" "+t.last_name,t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=l.PLATFORM_INTERNAL,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(e){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===l.PLATFORM_INTERNAL||x(V(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===l.PLATFORM_INTERNAL||x(V(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){var r=this;return t===l.PLATFORM_INTERNAL?new Promise((function(t,n){var o=Array.isArray(e)?e:[e];r._platformSdk.send("VKWebAppStorageGet",{keys:o}).then((function(r){if(Array.isArray(e)){for(var n=[],o=function(t){var o,i=r.keys.findIndex((function(r){return r.key===e[t]}));if(i<0)return n.push(null),0;if(""===r.keys[i].value)return n.push(null),0;try{o=JSON.parse(r.keys[i].value)}catch(e){o=r.keys[i].value}n.push(o)},i=0;i<e.length;i++)o(i);t(n)}else if(""!==r.keys[0].value){var a;try{a=JSON.parse(r.keys[0].value)}catch(e){a=r.keys[0].value}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))})):x(V(p.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===l.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var u={key:e,value:t};return"string"!=typeof t&&(u.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",u).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return x(V(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===l.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return x(V(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r="bottom",n="resize",o=!1;e&&("string"==typeof e.position&&(r=e.position),"string"==typeof e.layoutType&&(n=e.layoutType),"boolean"==typeof e.canClose&&(o=e.canClose)),this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:r,layout_type:n,can_close:o}).then((function(e){e.result?t._setBannerState(c.SHOWN):t._setBannerState(c.FAILED)})).catch((function(e){t._setBannerState(c.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(c.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(u.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?u.CLOSED:u.FAILED)})).catch((function(){e._setInterstitialState(u.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(s.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(s.REWARDED),e._setRewardedState(s.CLOSED)):e._setRewardedState(s.FAILED)})).catch((function(){e._setRewardedState(s.FAILED)}))}))}},{key:"inviteFriends",value:function(){return Z(this,Q,$).call(this,y.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t),isNaN(t))?Promise.reject():Z(this,Q,$).call(this,y.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public"+t)}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),Z(this,Q,$).call(this,y.SHARE,"VKWebAppShare",t,"type")}},{key:"createPost",value:function(e){var t={};return e&&e.message&&(t.message=e.message),e&&e.attachments&&(t.attachments=e.attachments),Z(this,Q,$).call(this,y.CREATE_POST,"VKWebAppShowWallPostBox",t,"post_id")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?Z(this,Q,$).call(this,y.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return Z(this,Q,$).call(this,y.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return"boolean"==typeof e.global&&(t.global=e.global?1:0),Z(this,Q,$).call(this,y.SHOW_LEADERBOARD_NATIVE_POPUP,"VKWebAppShowLeaderBoardBox",t)}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(M);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function ne(e){var t=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===te(t)?t:String(t)}const oe=function(){function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=ne(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t}var t,r;return t=e,(r=[{key:"initialize",value:function(){return Promise.resolve()}}])&&re(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ie(o)?o:String(o)),n)}var o}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}const ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(n);if(o){var r=se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"sendMessage",value:function(e){return this._platformBridge.sendMessage(e)}}])&&ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===le(o)?o:String(o)),n)}var o}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}const de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(n);if(o){var r=ye(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&fe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==he(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===he(o)?o:String(o)),n)}var o}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(u,e);var t,r,n,o,a=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(n);if(o){var r=be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e))._platformBridge.on(i.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(i.VISIBILITY_STATE_CHANGED,e)})),t}return t=u,(r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}}])&&me(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(oe);T().mixin(_e.prototype);const ge=_e;function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Se(o)?o:String(o)),n)}var o}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Oe(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var ke=new WeakMap;const Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(n);if(o){var r=Ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}(this,e)});function a(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,u=new Array(o),s=0;s<o;s++)u[s]=arguments[s];return t=Pe(e=i.call.apply(i,[this].concat(u))),n={writable:!0,value:[]},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=ke),r.set(t,n),e}return t=a,(r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=this;if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n)}var o=t;o||(o=this.defaultType);var i=Oe(this,ke)[o];return i&&void 0!==i[e]?Promise.resolve(i[e]):this._platformBridge.getDataFromStorage(e,o).then((function(t){return r._addToCache(o,e,t),t}))}},{key:"set",value:function(e,t,r){var n=this;if(r){var o=r[this._platformBridge.platformId];if(o)return this.set(e,t,o)}var i=r;return i||(i=this.defaultType),this._platformBridge.setDataToStorage(e,t,i).then((function(){return n._addToCache(i,e,t)}))}},{key:"delete",value:function(e,t){var r=this;if(t){var n=t[this._platformBridge.platformId];if(n)return this.delete(e,n)}var o=t;return o||(o=this.defaultType),this._platformBridge.deleteDataFromStorage(e,o).then((function(){return r._deleteFromCache(o,e)}))}},{key:"_addToCache",value:function(e,t,r){if(Oe(this,ke)[e]||(Oe(this,ke)[e]=[]),Array.isArray(t))for(var n=0;n<t.length;n++)Oe(this,ke)[e][t[n]]=r[t[n]];else Oe(this,ke)[e][t]=r}},{key:"_deleteFromCache",value:function(e,t){if(Oe(this,ke)[e])if(Array.isArray(t))for(var r=0;r<t.length;r++)delete Oe(this,ke)[e][t[r]];else delete Oe(this,ke)[e][t]}}])&&we(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==De(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===De(o)?o:String(o)),n)}var o}function Re(e,t){Le(e,t),t.add(e)}function je(e,t,r){Le(e,t),t.set(e,r)}function Le(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ne(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Be(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Me(e,t,"set"),r),r}function Ce(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Me(e,t,"get"))}function Me(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ge="created",Fe="completed",We=new WeakMap,ze=new WeakMap,He=new WeakMap,xe=new WeakMap,Ue=new WeakSet,Ye=new WeakSet,Ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Re(this,Ye),Re(this,Ue),je(this,We,{writable:!0,value:0}),je(this,ze,{writable:!0,value:0}),je(this,He,{writable:!0,value:Ge}),je(this,xe,{writable:!0,value:0}),Be(this,We,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return Ce(this,He)}},{key:"start",value:function(){var e=this;switch(Ce(this,He)){case Ge:case Fe:Be(this,ze,Ce(this,We)),Ne(this,Ue,Ke).call(this,"started"),Be(this,xe,setInterval((function(){Be(e,ze,Ce(e,ze)-1),e.emit("time_left_changed",Ce(e,ze)),Ce(e,ze)<=0&&(Ne(e,Ye,Ze).call(e),Ne(e,Ue,Ke).call(e,Fe))}),1e3))}}},{key:"stop",value:function(){Ne(this,Ye,Ze).call(this),Ne(this,Ue,Ke).call(this,"stopped")}}])&&Ie(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ke(e){Be(this,He,e),this.emit("state_changed",Ce(this,He))}function Ze(){Be(this,ze,0),clearInterval(Ce(this,xe))}T().mixin(Ve.prototype);const qe=Ve;function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Je(o)?o:String(o)),n)}var o}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){nt(e,t),t.add(e)}function rt(e,t,r){nt(e,t),t.set(e,r)}function nt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ot(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ut(e,t,"set"),r),r}function it(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function at(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ut(e,t,"get"))}function ut(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var st=new WeakMap,ct=new WeakMap,lt=new WeakSet,ft=new WeakSet,pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(n);if(o){var r=et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),tt($e(t=a.call(this,e)),ft),tt($e(t),lt),rt($e(t),st,{writable:!0,value:void 0}),rt($e(t),ct,{writable:!0,value:60}),t._platformBridge.on(i.INTERSTITIAL_STATE_CHANGED,(function(e){e===u.CLOSED&&at($e(t),ct)>0&&it($e(t),lt,yt).call($e(t)),t.emit(i.INTERSTITIAL_STATE_CHANGED,e)})),t._platformBridge.on(i.REWARDED_STATE_CHANGED,(function(e){return t.emit(i.REWARDED_STATE_CHANGED,e)})),t._platformBridge.on(i.BANNER_STATE_CHANGED,(function(e){return t.emit(i.BANNER_STATE_CHANGED,e)})),t}return t=l,(r=[{key:"isBannerSupported",get:function(){return this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return this._platformBridge.bannerState}},{key:"interstitialState",get:function(){return this._platformBridge.interstitialState}},{key:"rewardedState",get:function(){return this._platformBridge.rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return at(this,ct)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(void 0!==t)return this.setMinimumDelayBetweenInterstitial(t)}var r=Je(e),n=at(this,ct);switch(r){case"number":n=e;break;case"string":if(n=parseInt(e),isNaN(n))return}ot(this,ct,n),at(this,st)&&(at(this,st).stop(),it(this,lt,yt).call(this))}},{key:"showBanner",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showBanner(t)}if(this.bannerState)switch(this.bannerState){case c.LOADING:case c.SHOWN:return}this._platformBridge._setBannerState(c.LOADING),this.isBannerSupported?this._platformBridge.showBanner(e):this._platformBridge._setBannerState(c.FAILED)}},{key:"hideBanner",value:function(){if(this.bannerState)switch(this.bannerState){case c.LOADING:case c.HIDDEN:return}this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"showInterstitial",value:function(e){if(!it(this,ft,dt).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showInterstitial(t)}var r=!1;e&&"boolean"==typeof e.ignoreDelay&&(r=e.ignoreDelay),this._platformBridge._setInterstitialState(u.LOADING),!at(this,st)||at(this,st).state===Fe||r?this._platformBridge.showInterstitial():this._platformBridge._setInterstitialState(u.FAILED)}}},{key:"showRewarded",value:function(){it(this,ft,dt).call(this)||(this._platformBridge._setRewardedState(s.LOADING),this._platformBridge.showRewarded())}}])&&Xe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(oe);function yt(){ot(this,st,new qe(at(this,ct))),at(this,st).start()}function dt(){if(this.interstitialState)switch(this.interstitialState){case u.LOADING:case u.OPENED:return!0}if(this.rewardedState)switch(this.rewardedState){case s.LOADING:case s.OPENED:case s.REWARDED:return!0}return!1}T().mixin(pt.prototype);const ht=pt;function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==mt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===mt(o)?o:String(o)),n)}var o}function bt(e,t){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bt(e,t)}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}const gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(n);if(o){var r=_t(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(){return this._platformBridge.inviteFriends()}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&vt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==St(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===St(o)?o:String(o)),n)}var o}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}const At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pt(n);if(o){var r=Pt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&wt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ot(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ot(o)?o:String(o)),n)}var o}function Tt(e,t){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tt(e,t)}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}const It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(n);if(o){var r=Dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:"isMultipleBoardsSupported",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:"isSetScoreSupported",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:"isGetScoreSupported",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:"isGetEntriesSupported",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:"setScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setScore(t)}return this._platformBridge.setLeaderboardScore(e)}},{key:"getScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getScore(t)}return this._platformBridge.getLeaderboardScore(e)}},{key:"getEntries",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getEntries(t)}return this._platformBridge.getLeaderboardEntries(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showLeaderboardNativePopup(e)}}])&&kt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Rt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Rt(o)?o:String(o)),n)}var o}function Lt(e,t){return Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lt(e,t)}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}const Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nt(n);if(o){var r=Nt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(e){return this._platformBridge.paymentsPurchase(e)}},{key:"consume",value:function(e){return this._platformBridge.paymentsConsume(e)}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.paymentsGetCatalog()}}])&&jt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ct(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ct(o)?o:String(o)),n)}var o}function Gt(){return Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Gt.apply(this,arguments)}function Ft(e,t){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ft(e,t)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function Ht(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function xt(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Yt(e,t,"set"),r),r}function Ut(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Yt(e,t,"get"))}function Yt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Vt=new WeakMap,Kt=new WeakMap;const Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(d,e);var t,r,o,i,a=(o=d,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zt(o);if(i){var r=zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wt(e)}(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ht(Wt(e=a.call.apply(a,[this].concat(r))),Vt,{writable:!0,value:null}),Ht(Wt(e),Kt,{writable:!0,value:!1}),e}return t=d,(r=[{key:"platformId",get:function(){return n.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Ut(this,Vt)?Ut(this,Vt).countryCode.toLowerCase():Gt(zt(d.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){if(Ut(this,Vt))switch(Ut(this,Vt).device.type.toLowerCase()){case f.DESKTOP:return f.DESKTOP;case f.MOBILE:return f.MOBILE;case f.TABLET:return f.TABLET}return Gt(zt(d.prototype),"deviceType",this)}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),G("https://sdk.crazygames.com/crazygames-sdk-v1.js").then((function(){F("CrazyGames","CrazySDK","getInstance").then((function(){e._platformSdk=window.CrazyGames.CrazySDK.getInstance(),e._platformSdk.addEventListener("initialized",(function(t){xt(e,Vt,t.userInfo),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})),e._platformSdk.addEventListener("adStarted",(function(){Ut(e,Kt)?e._setRewardedState(s.OPENED):e._setInterstitialState(u.OPENED)})),e._platformSdk.addEventListener("adFinished",(function(){Ut(e,Kt)?(e._setRewardedState(s.REWARDED),e._setRewardedState(s.CLOSED)):e._setInterstitialState(u.CLOSED)})),e._platformSdk.addEventListener("adError",(function(){Ut(e,Kt)?e._setRewardedState(s.FAILED):e._setInterstitialState(u.FAILED)})),e._platformSdk.addEventListener("bannerRendered",(function(t){e._setBannerState(c.SHOWN)})),e._platformSdk.addEventListener("bannerError",(function(t){e._setBannerState(c.FAILED)})),e._defaultStorageType=l.LOCAL_STORAGE,e._isBannerSupported=!0,e._platformSdk.init()}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case p.IN_GAME_LOADING_STARTED:return this._platformSdk.sdkGameLoadingStart(),Promise.resolve();case p.IN_GAME_LOADING_STOPPED:return this._platformSdk.sdkGameLoadingStop(),Promise.resolve();case p.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case p.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();case p.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.happytime(),Promise.resolve()}return Gt(zt(d.prototype),"sendMessage",this).call(this,e)}},{key:"showBanner",value:function(e){e&&e.containerId&&"string"==typeof e.containerId?this._platformSdk.requestResponsiveBanner([e.containerId]):this._setBannerState(c.FAILED)}},{key:"hideBanner",value:function(){this._platformSdk.clearAllBanners(),this._setBannerState(c.HIDDEN)}},{key:"showInterstitial",value:function(){xt(this,Kt,!1),this._platformSdk.requestAd("midgame")}},{key:"showRewarded",value:function(){xt(this,Kt,!0),this._platformSdk.requestAd("rewarded")}}])&&Mt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(M);function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=$t(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$t(n.key),n)}}function $t(e){var t=function(e,t){if("object"!==qt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===qt(t)?t:String(t)}function er(){return er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},er.apply(this,arguments)}function tr(e,t){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tr(e,t)}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}var or=new WeakSet;function ir(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r,n){if(r&&1===r.length){var o=r[0];e._playerName=o.full_name,""!==o.avatar&&(e._playerPhotos=[o.avatar])}t()}))}))}const ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tr(e,t)}(c,e);var t,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nr(o);if(i){var r=nr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rr(e)}(this,e)});function c(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=rr(e=a.call.apply(a,[this].concat(o))),r=or),r.add(t),e}return t=c,(r=[{key:"platformId",get:function(){return n.ABSOLUTE_GAMES}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),G("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new AgRuSdk,e._platformSdk.on(AgRuSdkMethods.ShowCampaign,(function(t,r){switch(t.type){case"default":null===r?t.status?e._setInterstitialState(u.OPENED):e._setInterstitialState(u.CLOSED):e._setInterstitialState(u.FAILED);break;case"rewarded":null===r?t.status?e._setRewardedState(s.OPENED):(t.reward&&e._setRewardedState(s.REWARDED),e._setRewardedState(s.CLOSED)):e._setRewardedState(s.FAILED)}}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,or,ir).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?l.PLATFORM_INTERNAL:l.LOCAL_STORAGE,e._resolvePromiseDecorator(y.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(e){var t=this;if(this._isPlayerAuthorized)return Promise.resolve();var r=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(e,r){null===r?t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER):t._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,r)}))),r.promise}},{key:"isStorageSupported",value:function(e){return e===l.PLATFORM_INTERNAL||er(nr(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===l.PLATFORM_INTERNAL?this._isPlayerAuthorized:er(nr(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){var r=this;return t===l.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else r._isPlayerAuthorized?r._platformSdk.getSaveData((function(o,i){if(null===i){if(null===o&&(o={}),r._platformStorageCachedData=o,Array.isArray(e)){for(var a=[],u=0;u<e.length;u++){var s=void 0===r._platformStorageCachedData[e[u]]?null:r._platformStorageCachedData[e[u]];a.push(s)}return void t(a)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else n(i)})):n()})):er(nr(c.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===l.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?Xt({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):er(nr(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===l.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?Xt({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):er(nr(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&Qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(M);function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ur(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ur(o)?o:String(o)),n)}var o}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e){return fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fr(e)}function pr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,dr(e,t,"set"),r),r}function yr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,dr(e,t,"get"))}function dr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var hr=new WeakMap;const mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(f,e);var t,r,o,i,a=(o=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fr(o);if(i){var r=fr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lr(e)}(this,e)});function f(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return t=lr(e=a.call.apply(a,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=hr),r.set(t,n),e}return t=f,(r=[{key:"platformId",get:function(){return n.GAME_DISTRIBUTION}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(y.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(y.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._platformSdk.preloadAd("rewarded"),t._isInitialized=!0,t._resolvePromiseDecorator(y.INITIALIZE);break;case"SDK_GAME_START":yr(t,hr)?t._setRewardedState(s.CLOSED):t._setInterstitialState(u.CLOSED);break;case"SDK_GAME_PAUSE":yr(t,hr)?t._setRewardedState(s.OPENED):t._setInterstitialState(u.OPENED);break;case"SDK_GDPR_TRACKING":case"SDK_GDPR_TARGETING":break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(s.REWARDED)}}},this._defaultStorageType=l.LOCAL_STORAGE,this._isBannerSupported=!0,G("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(y.INITIALIZE,m);return e.promise}},{key:"showBanner",value:function(e){var t=this;e&&e.containerId&&"string"==typeof e.containerId?this._platformSdk.showAd("display",{containerId:e.containerId}).then((function(){t._setBannerState(c.SHOWN)})).catch((function(e){t._setBannerState(c.FAILED)})):this._setBannerState(c.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(c.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;pr(this,hr,!1),this._platformSdk?this._platformSdk.showAd().catch((function(t){e._setInterstitialState(u.FAILED)})):this._setInterstitialState(u.FAILED)}},{key:"showRewarded",value:function(){var e=this;pr(this,hr,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(t){e._setRewardedState(s.FAILED)})):this._setRewardedState(s.FAILED)}}])&&sr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(M);function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Sr(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sr(n.key),n)}}function Sr(e){var t=function(e,t){if("object"!==vr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===vr(t)?t:String(t)}function wr(){return wr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ar(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},wr.apply(this,arguments)}function Er(e,t){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Er(e,t)}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}function Or(e,t){Tr(e,t),t.add(e)}function kr(e,t,r){Tr(e,t),t.set(e,r)}function Tr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,jr(e,t,"set"),r),r}function Ir(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Rr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,jr(e,t,"get"))}function jr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Lr=new WeakMap,Nr=new WeakMap,Br=new WeakMap,Cr=new WeakMap,Mr=new WeakSet,Gr=new WeakSet,Fr=new WeakSet,Wr=new WeakSet,zr=new WeakSet;function Hr(e,t){return e&&"string"==typeof e.leaderboardName?t===Zr.GET_LEADERBOARD_ENTRIES&&Ir(this,Fr,Ur).call(this,e)?Zr.GET_PLAYER_ENTRY+e.leaderboardName:t+e.leaderboardName:t}function xr(e){var t={includeUser:!1,quantityAround:5,quantityTop:5};return"boolean"==typeof e.includeUser&&(t.includeUser=e.includeUser),"string"==typeof e.quantityAround&&(e.quantityAround=parseInt(e.quantityAround)),"number"==typeof e.quantityAround&&(t.quantityAround=e.quantityAround),"string"==typeof e.quantityTop&&(e.quantityTop=parseInt(e.quantityTop)),"number"==typeof e.quantityTop&&(t.quantityTop=e.quantityTop),t}function Ur(e){var t=Ir(this,Gr,xr).call(this,e);return t.includeUser&&0===t.quantityAround&&0==t.quantityTop}function Yr(e){return e.map((function(e){var t=[],r=e.player.getAvatarSrc("small"),n=e.player.getAvatarSrc("medium"),o=e.player.getAvatarSrc("large");return r&&t.push(r),n&&t.push(n),o&&t.push(o),{id:e.player.uniqueID,extraData:e.extraData,score:e.score,rank:e.rank,name:e.player.publicName,photos:t}}))}function Vr(e){var t=this;return new Promise((function(r){var n={scopes:!1};e&&"boolean"==typeof e.scopes&&(n.scopes=e.scopes),t._platformSdk.getPlayer(n).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized="lite"!==e.getMode();var r=e.getName();""!==r&&(t._playerName=r),t._playerPhotos=[];var n=e.getPhoto("small"),o=e.getPhoto("medium"),i=e.getPhoto("large");n&&t._playerPhotos.push(n),o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),Dr(t,Nr,e)})).finally((function(){r()}))}))}const Kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Er(e,t)}(d,e);var t,r,o,i,a=(o=d,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ar(o);if(i){var r=Ar(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pr(e)}(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Or(Pr(e=a.call.apply(a,[this].concat(r))),zr),Or(Pr(e),Wr),Or(Pr(e),Fr),Or(Pr(e),Gr),Or(Pr(e),Mr),kr(Pr(e),Lr,{writable:!0,value:!1}),kr(Pr(e),Nr,{writable:!0,value:null}),kr(Pr(e),Br,{writable:!0,value:null}),kr(Pr(e),Cr,{writable:!0,value:null}),e}return t=d,(r=[{key:"platformId",get:function(){return n.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():wr(Ar(d.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():wr(Ar(d.prototype),"platformTld",this)}},{key:"deviceType",get:function(){if(this._platformSdk)switch(this._platformSdk.deviceInfo.type){case f.DESKTOP:return f.DESKTOP;case f.MOBILE:return f.MOBILE;case f.TABLET:return f.TABLET;case f.TV:return f.TV}return wr(Ar(d.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return Rr(this,Lr)}},{key:"isRateSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),this._options&&"string"==typeof this._options.metrikaId&&W(this._options.metrikaId),G("https://yandex.ru/games/sdk/v2").then((function(){F("YaGames","init").then((function(){window.YaGames.init().then((function(t){e._platformSdk=t;var r=Ir(e,zr,Vr).call(e),n=e._platformSdk.getStorage().then((function(t){e._localStorage=t})),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){Dr(e,Lr,t.canShow)})),i=new Promise((function(e){setTimeout(e,1e3)})),a=Promise.race([o,i]),u=e._platformSdk.getLeaderboards().then((function(t){Dr(e,Cr,t)}));e._isBannerSupported=!0;var s=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(c.SHOWN)}));Promise.all([r,n,a,u,s]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?l.PLATFORM_INTERNAL:l.LOCAL_STORAGE,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){var t;return e===p.GAME_READY?(null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve()):wr(Ar(d.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return r&&(this._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,"YANDEX uncatch in promise"),r=null),r||(r=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._isPlayerAuthorized?Ir(this,zr,Vr).call(this,e).then((function(){t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)})):this._platformSdk.auth.openAuthDialog().then((function(){Ir(t,zr,Vr).call(t,e).then((function(){t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"isStorageSupported",value:function(e){return e===l.PLATFORM_INTERNAL||wr(Ar(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===l.PLATFORM_INTERNAL?this._isPlayerAuthorized:wr(Ar(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){var r=this;return t===l.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else Rr(r,Nr)?Rr(r,Nr).getData().then((function(n){if(r._platformStorageCachedData=n,Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];o.push(a)}t(o)}else t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])})).catch((function(e){n(e)})):n()})):wr(Ar(d.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===l.PLATFORM_INTERNAL?new Promise((function(r,o){if(Rr(n,Nr)){var i=null!==n._platformStorageCachedData?_r({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;Rr(n,Nr).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}else o()})):wr(Ar(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===l.PLATFORM_INTERNAL?new Promise((function(t,n){if(Rr(r,Nr)){var o=null!==r._platformStorageCachedData?_r({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];Rr(r,Nr).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}else n()})):wr(Ar(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.adv.showBannerAdv().then((function(e){e.stickyAdvIsShowing?t._setBannerState(c.SHOWN):t._setBannerState(c.FAILED)})).catch((function(e){t._setBannerState(c.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(c.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(u.OPENED)},onClose:function(t){t?e._setInterstitialState(u.CLOSED):(console.error("YANDEX showInterstitial FAILED "),e._setInterstitialState(u.FAILED))}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(s.OPENED)},onRewarded:function(){e._setRewardedState(s.REWARDED)},onClose:function(){e._setRewardedState(s.CLOSED)},onError:function(t){console.error("YANDEX showRewarded FAILED "+t),e._setRewardedState(s.FAILED)}}})}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(y.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(y.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(y.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(y.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(y.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(y.RATE);return t||(t=this._createPromiseDecorator(y.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(y.RATE):e._rejectPromiseDecorator(y.RATE)})).catch((function(t){e._rejectPromiseDecorator(y.RATE,t)})):e._rejectPromiseDecorator(y.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(y.RATE,t)}))),t.promise}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(Rr(this,Cr)&&e&&e.score&&e.leaderboardName))return Promise.reject();var r=Ir(this,Mr,Hr).call(this,e,Zr.SET_LEADERBOARD_SCORE),n=this._getPromiseDecorator(r);return n||(n=this._createPromiseDecorator(r),"string"==typeof e.score&&(e.score=parseInt(e.score)),console.log("options"+e),console.log("extraData"+e.extraData),Rr(this,Cr).setLeaderboardScore(e.leaderboardName,e.score,e.extraData).then((function(){t._resolvePromiseDecorator(r,{leaderboardName:e.leaderboardName,data:[],error:null})})).catch((function(n){t._rejectPromiseDecorator(r,{leaderboardName:e.leaderboardName,data:[],error:n})}))),n.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!Rr(this,Cr)||!e||!e.leaderboardName)return Promise.reject();var r=Ir(this,Mr,Hr).call(this,e,Zr.GET_LEADERBOARD_SCORE),n=this._getPromiseDecorator(r);return n||(n=this._createPromiseDecorator(r),Rr(this,Cr).getLeaderboardPlayerEntry(e.leaderboardName).then((function(e){t._resolvePromiseDecorator(r,e.score)})).catch((function(e){t._rejectPromiseDecorator(r,e)}))),n.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!Rr(this,Cr)||!e||!e.leaderboardName)return Promise.reject();var r=Ir(this,Gr,xr).call(this,e),n=Ir(this,Mr,Hr).call(this,e,Zr.GET_LEADERBOARD_ENTRIES),o=this._getPromiseDecorator(n);return o||(o=this._createPromiseDecorator(n),r.includeUser&&0===r.quantityTop&&0===r.quantityAround?Rr(this,Cr).getLeaderboardPlayerEntry(e.leaderboardName).then((function(r){var o=null;(r={entries:[r]})&&r.entries.length>0&&(o=Ir(t,Wr,Yr).call(t,r.entries)),t._resolvePromiseDecorator(n,{leaderboardName:e.leaderboardName,data:o,error:null})})).catch((function(r){t._rejectPromiseDecorator(n,{leaderboardName:e.leaderboardName,data:[],error:r})})):Rr(this,Cr).getLeaderboardEntries(e.leaderboardName,r).then((function(r){var o=null;r&&r.entries.length>0&&(o=Ir(t,Wr,Yr).call(t,r.entries)),t._resolvePromiseDecorator(n,{leaderboardName:e.leaderboardName,data:o,error:null})})).catch((function(r){t._rejectPromiseDecorator(n,{leaderboardName:e.leaderboardName,data:null,error:r})}))),o.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!Rr(this,Br)||!e||!e.id)return Promise.reject();var r=this._getPromiseDecorator(y.PURCHASE);return r||(r=this._createPromiseDecorator(y.PURCHASE),Rr(this,Br).purchase(e).then((function(e){t._resolvePromiseDecorator(y.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),r.promise}},{key:"paymentsConsume",value:function(e){var t=this;if(!Rr(this,Br))return Promise.reject();var r=this._getPromiseDecorator(y.CONSUME);return r||(r=this._createPromiseDecorator(y.CONSUME),Rr(this,Br).consumePurchase(e).then((function(e){t._resolvePromiseDecorator(y.CONSUME,e)})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!Rr(this,Br))return Promise.reject();var t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),Rr(this,Br).getPurchases().then((function(t){e._resolvePromiseDecorator(y.GET_PURCHASES,t)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!Rr(this,Br))return Promise.reject();var t=this._getPromiseDecorator(y.GET_CATALOG);return t||(t=this._createPromiseDecorator(y.GET_CATALOG),Rr(this,Br).getCatalog().then((function(t){e._resolvePromiseDecorator(y.GET_CATALOG,t)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),t.promise}}])&&gr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(M);var Zr=_r(_r({},y),{},{GET_PLAYER_ENTRY:"GET_PLAYER_ENTRY"});function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===qr(o)?o:String(o)),n)}var o}function Xr(){return Xr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Xr.apply(this,arguments)}function Qr(e,t){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qr(e,t)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},en(e)}function tn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function nn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,on(e,t,"set"),r),r}function on(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var an=new WeakMap,un=new WeakSet;function sn(e,t){return Promise.reject()}const cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qr(e,t)}(c,e);var t,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=en(o);if(i){var r=en(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $r(e)}(this,e)});function c(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return tn(t=$r(e=a.call.apply(a,[this].concat(o))),r=un),r.add(t),function(e,t,r){tn(e,t),t.set(e,{writable:!0,value:!1})}($r(e),an),e}return t=c,(r=[{key:"platformId",get:function(){return n.VKPLAY}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);try{if(e.searchParams.has("lang")){var t=e.searchParams.get("lang");if(2===t.length)return t;if(t.length>2)return t.substring(0,2)}}catch(e){return Xr(en(c.prototype),"platformLanguage",this)}return Xr(en(c.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("payload")?e.searchParams.get("payload"):Xr(en(c.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){return Xr(en(c.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(y.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(y.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this,r=t._options.gameId,n="https://vkplay.ru/app/[GMRID]/static/mailru.core.js".replace("[GMRID]",r);this._defaultStorageType=l.LOCAL_STORAGE,this._isBannerSupported=!1,this._options&&"string"==typeof this._options.metrikaId&&W(this._options.metrikaId),G(n).then((function(){"undefined"!=typeof iframeApi?iframeApi({appid:r,getLoginStatusCallback:function(e){},userInfoCallback:function(e){},userProfileCallback:function(e){},registerUserCallback:function(e){},paymentFrameUrlCallback:function(e){},getAuthTokenCallback:function(e){},paymentReceivedCallback:function(e){},paymentWindowClosedCallback:function(){},userConfirmCallback:function(){},paymentFrameItem:function(e){},getGameInventoryItems:function(){},adsCallback:function(e){var r;!function(e,t){return t.get?t.get.call(e):t.value}(r=t,on(r,an,"get"))?"adCompleted"===e.type||"adDismissed"===e.type?t._setInterstitialState(u.CLOSED):"adError"===e.type&&t._setInterstitialState(u.ERROR):"adCompleted"===e.type?(t._setRewardedState(s.REWARDED),t._setRewardedState(s.CLOSED)):"adDismissed"===e.type?t._setRewardedState(s.CLOSED):"adError"===e.type&&t._setRewardedState(s.ERROR)}}).then((function(e){t._platformSdk=e,t._isInitialized=!0,t._resolvePromiseDecorator(y.INITIALIZE)}),(function(e){this._rejectPromiseDecorator(y.INITIALIZE,"Could not init external api "+e)})):console.log("Cannot find iframeApi function, are we inside an iframe?")}))}else this._rejectPromiseDecorator(y.INITIALIZE,ERROR.GAME_DISTRIBUTION_GAME_ID_IS_UNDEFINED);return e.promise}},{key:"authorizePlayer",value:function(e){return Promise.reject()}},{key:"isStorageSupported",value:function(e){return e===l.PLATFORM_INTERNAL||Xr(en(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===l.PLATFORM_INTERNAL||Xr(en(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){return Xr(en(c.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){return Xr(en(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return Xr(en(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){}},{key:"hideBanner",value:function(){}},{key:"showInterstitial",value:function(){nn(this,an,!1),this._platformSdk.showAds({interstitial:!0}),this._setInterstitialState(u.OPENED)}},{key:"showRewarded",value:function(){nn(this,an,!0),this._platformSdk.showAds({interstitial:!1}),this._setRewardedState(s.OPENED)}},{key:"inviteFriends",value:function(){return rn(this,un,sn).call(this,y.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t),isNaN(t))?Promise.reject():rn(this,un,sn).call(this,y.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public"+t)}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),rn(this,un,sn).call(this,y.SHARE,"VKWebAppShare",t,"type")}},{key:"createPost",value:function(e){var t={};return e&&e.message&&(t.message=e.message),e&&e.attachments&&(t.attachments=e.attachments),rn(this,un,sn).call(this,y.CREATE_POST,"VKWebAppShowWallPostBox",t,"post_id")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported,Promise.reject()}},{key:"addToFavorites",value:function(){return rn(this,un,sn).call(this,y.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return"boolean"==typeof e.global&&(t.global=e.global?1:0),Promise.reject()}}])&&Jr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(M);function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yn(n.key),n)}}function yn(e){var t=function(e,t){if("object"!==ln(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ln(t)?t:String(t)}function dn(e,t){mn(e,t),t.add(e)}function hn(e,t,r){mn(e,t),t.set(e,r)}function mn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,gn(e,t,"set"),r),r}function bn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _n(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,gn(e,t,"get"))}function gn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}e=r.hmd(e);var Sn=new WeakMap,wn=new WeakMap,En=new WeakMap,Pn=new WeakMap,An=new WeakMap,On=new WeakSet,kn=new WeakSet;function Tn(){var e=n.MOCK;if(this._options&&this._options.forciblySetPlatformId)switch(this._options.forciblySetPlatformId){case n.VK:e=n.VK;break;case n.YANDEX:e=n.YANDEX;break;case n.CRAZY_GAMES:e=n.CRAZY_GAMES;break;case n.ABSOLUTE_GAMES:e=n.ABSOLUTE_GAMES;break;case n.GAME_DISTRIBUTION:e=n.GAME_DISTRIBUTION;break;case n.VKPLAY:e=n.VKPLAY}else{var t=new URL(window.location.href),r=["y","a","n","d","e","x",".","n","e","t"].join("");t.hostname.includes(r)||t.hash.includes("yandex")?e=n.YANDEX:t.hostname.includes("crazygames.")||t.hostname.includes("1001juegos.com")?e=n.CRAZY_GAMES:t.hostname.includes("gamedistribution.com")?e=n.GAME_DISTRIBUTION:t.searchParams.has("api_id")&&t.searchParams.has("viewer_id")&&t.searchParams.has("auth_key")?e=n.VK:t.searchParams.has("app_id")&&t.searchParams.has("player_id")&&t.searchParams.has("game_sid")&&t.searchParams.has("auth_key")?e=n.ABSOLUTE_GAMES:(t.searchParams.has("ab_target_platform_id")&&"vkplay"===t.searchParams.get("ab_target_platform_id")||t.searchParams.has("lang")&&t.searchParams.has("currency")&&t.searchParams.has("status"))&&(e=n.VKPLAY)}switch(e){case n.VK:vn(this,En,new ee(this._options&&this._options.platforms&&this._options.platforms[n.VK]));break;case n.CRAZY_GAMES:vn(this,En,new Zt(this._options&&this._options.platforms&&this._options.platforms[n.CRAZY_GAMES]));break;case n.ABSOLUTE_GAMES:vn(this,En,new ar(this._options&&this._options.platforms&&this._options.platforms[n.ABSOLUTE_GAMES]));break;case n.GAME_DISTRIBUTION:vn(this,En,new mr(this._options&&this._options.platforms&&this._options.platforms[n.GAME_DISTRIBUTION]));break;case n.MOCK:vn(this,En,new M);break;case n.VKPLAY:vn(this,En,new cn(this._options&&this._options.platforms&&this._options.platforms[n.VKPLAY]));break;case n.YANDEX:vn(this,En,new Kr(this._options&&this._options.platforms&&this._options.platforms[n.YANDEX]))}}function Dn(e){return _n(this,Sn)||console.error(d),_n(this,An)[e]?_n(this,An)[e]:_n(this,Pn)[e]}const In=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dn(this,kn),dn(this,On),hn(this,Sn,{writable:!0,value:!1}),hn(this,wn,{writable:!0,value:null}),hn(this,En,{writable:!0,value:null}),hn(this,Pn,{writable:!0,value:{}}),hn(this,An,{writable:!0,value:{}})}var r,y;return r=t,y=[{key:"version",get:function(){return"1.10.0"}},{key:"isInitialized",get:function(){return _n(this,Sn)}},{key:"platform",get:function(){return bn(this,kn,Dn).call(this,o.PLATFORM)}},{key:"player",get:function(){return bn(this,kn,Dn).call(this,o.PLAYER)}},{key:"game",get:function(){return bn(this,kn,Dn).call(this,o.GAME)}},{key:"storage",get:function(){return bn(this,kn,Dn).call(this,o.STORAGE)}},{key:"advertisement",get:function(){return bn(this,kn,Dn).call(this,o.ADVERTISEMENT)}},{key:"social",get:function(){return bn(this,kn,Dn).call(this,o.SOCIAL)}},{key:"device",get:function(){return bn(this,kn,Dn).call(this,o.DEVICE)}},{key:"leaderboard",get:function(){return bn(this,kn,Dn).call(this,o.LEADERBOARD)}},{key:"payments",get:function(){return bn(this,kn,Dn).call(this,o.PAYMENTS)}},{key:"PLATFORM_ID",get:function(){return n}},{key:"PLATFORM_MESSAGE",get:function(){return p}},{key:"MODULE_NAME",get:function(){return o}},{key:"EVENT_NAME",get:function(){return i}},{key:"INTERSTITIAL_STATE",get:function(){return u}},{key:"REWARDED_STATE",get:function(){return s}},{key:"BANNER_STATE",get:function(){return c}},{key:"STORAGE_TYPE",get:function(){return l}},{key:"VISIBILITY_STATE",get:function(){return a}},{key:"DEVICE_TYPE",get:function(){return f}},{key:"initialize",value:function(e){var t=this;return _n(this,Sn)?Promise.resolve():(_n(this,wn)||(vn(this,wn,new O),this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=yn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),bn(this,On,Tn).call(this),_n(this,En).initialize().then((function(){_n(t,Pn)[o.PLATFORM]=new ce(_n(t,En)),_n(t,Pn)[o.PLAYER]=new de(_n(t,En)),_n(t,Pn)[o.GAME]=new ge(_n(t,En)),_n(t,Pn)[o.STORAGE]=new Te(_n(t,En)),_n(t,Pn)[o.ADVERTISEMENT]=new ht(_n(t,En)),_n(t,Pn)[o.SOCIAL]=new gt(_n(t,En)),_n(t,Pn)[o.DEVICE]=new At(_n(t,En)),_n(t,Pn)[o.LEADERBOARD]=new It(_n(t,En)),_n(t,Pn)[o.PAYMENTS]=new Bt(_n(t,En)),vn(t,Sn,!0),console.log("%c InstantGamesBridge v."+t.version+" initialized. ","background: #01A5DA; color: white"),_n(t,wn)&&(_n(t,wn).resolve(),vn(t,wn,null))}))),_n(this,wn).promise)}},{key:"overrideModule",value:function(t,r){"object"===ln(r)&&(_n(this,An)[t]=r,"function"==typeof r.initialize&&r.initialize(e))}}],y&&pn(r.prototype,y),Object.defineProperty(r,"prototype",{writable:!1}),t}()},258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n](i,i.exports,r),i.loaded=!0,i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(11);window.instantGamesBridge=window.bridge=new e.Z})()})();
